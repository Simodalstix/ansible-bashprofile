---
- name: Configure bash profiles with custom PS1
  hosts: all
  become: yes
  tasks:
    - name: Set PS1 for regular users
      copy:
        content: |
          # Custom PS1 - Yellow for users, blue directory
          export PS1='\[\033[0;33m\]\u@\h\[\033[0m\]:\[\033[0;34m\]\w\[\033[0m\]$ '
        dest: /etc/profile.d/custom-ps1.sh
        mode: "0644"

    - name: Set PS1 for root
      copy:
        content: |
          # Custom PS1 - Orange for root, blue directory
          export PS1='\[\033[38;5;208m\]\u@\h\[\033[0m\]:\[\033[01;34m\]\w\[\033[0m\]# '

        dest: /root/.bashrc_custom
        mode: "0644"

    - name: Source custom profile in root's bashrc
      lineinfile:
        path: /root/.bashrc
        line: "source /root/.bashrc_custom"
        create: yes
